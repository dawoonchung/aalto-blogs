!function(a){function b(){a(".primary-menu").find(".menu-item-has-children").length&&a(".primary-menu").addClass("has-nested-menu")}function c(){$navbar=a(".main-navigation"),$navbar.find(".primary-menu").find("li").length<5&&($navbar.addClass("single-row"),a(".navbar-header").addClass("single-row"))}function d(){if(l)return!1;if(!a(".site-header-menu").length)return a("head").append('<style type="text/css" id="aalto-blogs-header-min-height">@media (min-width: 992px) { .site-header { min-height: 190px; } }</style>'),l=!0,!1;var b=a(".header-text-area").outerHeight(),c=a(".header-text-area > .container").outerHeight(),d=a(".site-header-menu").outerHeight(),e=16/9*d,f=e-c;f<40&&(f=40);var g=b+f;a("head").append('<style type="text/css" id="aalto-blogs-header-min-height">@media (min-width: 992px) { .site-header { min-height: '+g+"px; } }</style>"),l=!0}function e(){var b=a(".footer-fill").length?a("html").height()-a(".footer-fill").height():a("html").height(),c=a(window).height();if(b>c||b==c)return a(".footer-fill").length&&a(".footer-fill").remove(),!1;var d=c-b,e=a(".site-footer").css("background-color");if(a("body").hasClass("admin-bar")){var f=a("html").css("margin-top");d-=parseInt(f),console.log(f)}a(".footer-fill").length||a(".site-footer").after('<div class="footer-fill"></div>'),a(".footer-fill").css("height",d).css("background-color",e),console.log(d)}function f(b){$this=a(b),this.id=$this.attr("id"),this.slides=$this.children("figure"),this.width=$this.outerWidth(),this.Init=function(){var b=this.id,c=this.width,d=0;this.slides.each(function(){var e=a(this).find("img").attr("src");a(this).css("background-image","url("+e+")").css("left",d*c).attr("slide-count",d++).attr("slide-id",b)}),$this.find("nav").length?h(b,$this.attr("current-slide")):($this.append('<nav class="gallery-navigation" slide-id="'+this.id+'"><span class="gallery-prev" slide-data="prev"></span><span class="gallery-next" slide-data="next"></span></nav>'),$this.addClass("slider-initialised").attr("current-slide",0).attr("total-slides",d-1))}}function g(){a(".gallery-navigation span").click(function(){var b,c=a(this).attr("slide-data"),d=a(this).parent().attr("slide-id"),e=a("#"+d).attr("current-slide"),f=a("#"+d).attr("total-slides");"prev"==c&&(b="0"==e?f:--e),"next"==c&&(b=e==f?0:++e),h(d,b)})}function h(b,c){$slide=a("#"+b),shiftWidth=$slide.outerWidth()*c*-1,$slide.attr("current-slide",c),$slide.children("figure").css("transform","translateX("+shiftWidth+"px)")}function i(){a("article.post p, article.page p, figure.wp-caption").has("img:not(.wp-smiley)").each(function(){a(this).not("figure.wp-caption").addClass("has-image");var b=a(this).find("img").attr("width");b>1140?a(this).addClass("full-width"):b>788?a(this).addClass("large-width"):a(this).find("img").hasClass("size-thumbnail")?(a(".reading-mode").length?a(this).addClass("small-width").wrap('<div class="container"></div>'):a(this).addClass("small-width"),a(this).find(".wp-caption-text").css("maxWidth",b+"px")):a(this).addClass("default-width")}),a("article.post p, article.page p").has(".alignleft").each(function(){a(this).addClass("alignleft")}),a("article.post p, article.page p").has(".alignright").each(function(){a(this).addClass("alignright")}),a("article.post p, article.page p").has("iframe").each(function(){a(this).addClass("has-embed")})}function j(){if(a("body").hasClass("active-sidebar")&&(a("body").hasClass("single-post")||a("body").hasClass("page"))&&!a(".content-area").hasClass("reading-mode")){var b=a(".sidebar"),c=b.offset(),d=c.top+b.height();a("article.post p, article.page p, figure.wp-caption").has("img:not(.wp-smiley)").each(function(){var b=a(this).offset(),c=b.top;c>d&&a(this).addClass("below-sidebar")}),a(".gallery").not(".gallery-size-thumbnail").each(function(){var b=a(this).offset(),c=b.top;if(c>d){a(this).addClass("below-sidebar");var e=new f(this);e.Init()}})}}function k(){var b=a("#respond").length;if(b){var c=a(".must-log-in");c.length&&a("#respond").addClass("force-log-in").click(function(){$logInLink=c.attr("data-value"),window.location=$logInLink}),a("#respond").not(".force-log-in").click(function(b){a("#commentform").hasClass("active-form")&&a("#comment").val().length?b.stopPropagation():(a(this).toggleClass("active-form"),a("#commentform").toggleClass("active-form").slideToggle(200,function(){a("#comment").focus()})),b.stopPropagation()}),a(".comment-reply-link").click(function(b){a("#respond").addClass("active-form"),a("#commentform").addClass("active-form").slideDown(200,function(){a("#comment").focus()}),b.stopPropagation()}),a("#respond textarea, #respond input, #respond label").click(function(a){a.stopPropagation()}),a(document).click(function(){if(a("#commentform").hasClass("active-form")&&!a("#comment").val().length){a("#respond").removeClass("active-form"),a("#commentform").removeClass("active-form").slideUp(200);var b=addComment,c=b.I("wp-temp-form-div"),d=b.I(b.respondId),e=b.I("cancel-comment-reply-link");if(!c||!d)return;return b.I("comment_parent").value="0",c.parentNode.insertBefore(d,c),c.parentNode.removeChild(c),e.style.display="none",e.onclick=null,!1}}),a("#cancel-comment-reply-link").click(function(b){a("#respond").removeClass("active-form"),a("#commentform").removeClass("active-form").slideUp(200),b.stopPropagation()}),a.each(a("#respond textarea"),function(){var b=this.offsetHeight-this.clientHeight,c=function(c){a(c).css("height","auto").css("height",c.scrollHeight+b)};a(this).on("keyup input",function(){c(this)})})}}var l=!1;a(document).ready(function(){if(b(),c(),a(window).width()>991&&d(),e(),a("article").find("table").wrap('<div class="table-responsive"></div>'),a("body").hasClass("single-post")){var h=a(".site-header").outerHeight(),j=a(window).width();j<601&&a("body").hasClass("admin-bar")&&(h+=46,console.log(h)),a("html, body").scrollTop(h)}(a("body").hasClass("single-post")||a("body").hasClass("page"))&&(i(),a(".gallery").not(".gallery-size-thumbnail").each(function(){var a=new f(this);a.Init()}),g(),a(".gallery-caption").wrapInner("<span></span>").siblings(".gallery-icon").append('<div class="overlay"></div>')),k(),a(".search-submit").click(function(b){var c=a(this).siblings("label").children(".search-field");c.val().length||(b.preventDefault(),c.focus())})}),a(window).load(function(){j()});var m=!1,n=991;a(window).resize(function(){a(window).width()>n&&!l&&d(),m!==!1&&(clearTimeout(m),a(".gallery > figure").fadeOut(100).css("transition","none")),m=setTimeout(function(){a(".gallery").not(".gallery-size-thumbnail").each(function(){var a=new f(this);a.Init()}),a(".gallery > figure").css("transition","transform 0.5s ease-in-out").fadeIn(300),e()},300)})}(jQuery);